# Generated by Django 6.0 on 2026-01-16 05:49

import datetime
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import estate_app.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='CreditPackage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('featured_listing_credits', models.PositiveIntegerField(default=0)),
                ('bump_up_credits', models.PositiveIntegerField(default=0)),
                ('highlight_credits', models.PositiveIntegerField(default=0)),
                ('price', models.DecimalField(decimal_places=2, max_digits=10)),
                ('original_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('validity_days', models.PositiveIntegerField(default=365)),
                ('is_active', models.BooleanField(default=True)),
                ('razorpay_plan_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'credit_package',
                'ordering': ['price'],
            },
        ),
        migrations.CreateModel(
            name='CustomUser',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('email', models.EmailField(max_length=254, unique=True, verbose_name='email address')),
                ('user_type', models.CharField(choices=[('buyer', 'Buyer/Tenant'), ('seller', 'Seller/Owner'), ('agent', 'Agent/Broker'), ('builder', 'Builder/Developer'), ('admin', 'Administrator')], default='buyer', max_length=20, verbose_name='user type')),
                ('seller_type', models.CharField(blank=True, choices=[('individual', 'Individual Owner'), ('agent', 'Real Estate Agent'), ('builder', 'Builder/Developer'), ('dealer', 'Property Dealer')], max_length=20, null=True, verbose_name='seller type')),
                ('phone', models.CharField(blank=True, max_length=17, null=True, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '+999999999'. Up to 15 digits allowed.", regex='^\\+?1?\\d{9,15}$')], verbose_name='phone number')),
                ('alternate_phone', models.CharField(blank=True, max_length=17, null=True, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '+999999999'. Up to 15 digits allowed.", regex='^\\+?1?\\d{9,15}$')], verbose_name='alternate phone')),
                ('agency_name', models.CharField(blank=True, help_text='Real estate agency name (required for sellers and agents)', max_length=255, null=True, verbose_name='agency name')),
                ('pan_card', models.CharField(blank=True, max_length=20, null=True, verbose_name='PAN card number')),
                ('aadhar_card', models.CharField(blank=True, max_length=20, null=True, verbose_name='Aadhar card number')),
                ('verification_status', models.CharField(choices=[('basic', 'Basic'), ('verified', 'Verified'), ('premium_verified', 'Premium Verified')], default='basic', max_length=20, verbose_name='verification status')),
                ('show_phone_to', models.CharField(choices=[('everyone', 'Everyone'), ('premium', 'Premium Users Only'), ('none', 'No One')], default='everyone', max_length=20, verbose_name='show phone to')),
                ('show_email', models.BooleanField(default=True, verbose_name='show email')),
                ('allow_calls_from', models.TimeField(default=datetime.time(9, 0), verbose_name='allow calls from')),
                ('allow_calls_to', models.TimeField(default=datetime.time(21, 0), verbose_name='allow calls to')),
                ('is_verified', models.BooleanField(default=False, verbose_name='verified')),
                ('verification_token', models.UUIDField(blank=True, default=uuid.uuid4, editable=False, null=True)),
                ('verification_sent_at', models.DateTimeField(blank=True, null=True)),
                ('google_id', models.CharField(blank=True, max_length=255, null=True)),
                ('facebook_id', models.CharField(blank=True, max_length=255, null=True)),
                ('dashboard_theme', models.CharField(choices=[('light', 'Light'), ('dark', 'Dark')], default='light', max_length=20)),
                ('notification_preferences', models.JSONField(blank=True, default=dict, help_text='User notification preferences')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'verbose_name': 'user',
                'verbose_name_plural': 'users',
                'db_table': 'core_customuser',
                'ordering': ['-date_joined'],
            },
        ),
        migrations.CreateModel(
            name='Amenity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='amenity name')),
                ('slug', models.SlugField(max_length=100, unique=True, verbose_name='slug')),
                ('icon', models.CharField(blank=True, help_text='Font Awesome icon class, e.g., fa-wifi', max_length=100, null=True, verbose_name='icon class')),
                ('category', models.CharField(choices=[('basic', 'Basic Amenities'), ('security', 'Security'), ('parking', 'Parking'), ('community', 'Community'), ('green', 'Green Features'), ('luxury', 'Luxury Amenities')], default='basic', max_length=20, verbose_name='category')),
                ('description', models.TextField(blank=True, null=True, verbose_name='description')),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
            ],
            options={
                'verbose_name': 'amenity',
                'verbose_name_plural': 'amenities',
                'db_table': 'core_amenity',
                'ordering': ['category', 'name'],
                'indexes': [models.Index(fields=['slug'], name='core_amenit_slug_e4e13e_idx'), models.Index(fields=['category'], name='core_amenit_categor_66941d_idx'), models.Index(fields=['is_active'], name='core_amenit_is_acti_68c54b_idx')],
            },
        ),
        migrations.CreateModel(
            name='ContactMessage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='name')),
                ('email', models.EmailField(max_length=254, verbose_name='email')),
                ('phone', models.CharField(blank=True, max_length=17, null=True, verbose_name='phone')),
                ('subject', models.CharField(max_length=200, verbose_name='subject')),
                ('category', models.CharField(choices=[('general', 'General Inquiry'), ('support', 'Technical Support'), ('billing', 'Billing/Payment'), ('feature', 'Feature Request'), ('bug', 'Bug Report'), ('partnership', 'Partnership'), ('other', 'Other')], default='general', max_length=20, verbose_name='category')),
                ('message', models.TextField(verbose_name='message')),
                ('attachment', models.FileField(blank=True, null=True, upload_to='contact_attachments/', verbose_name='attachment')),
                ('status', models.CharField(choices=[('new', 'New'), ('in_progress', 'In Progress'), ('resolved', 'Resolved'), ('closed', 'Closed')], default='new', max_length=20, verbose_name='status')),
                ('priority', models.CharField(choices=[('low', 'Low'), ('normal', 'Normal'), ('high', 'High'), ('urgent', 'Urgent')], default='normal', max_length=20, verbose_name='priority')),
                ('is_resolved', models.BooleanField(default=False, verbose_name='resolved')),
                ('response', models.TextField(blank=True, null=True, verbose_name='response')),
                ('responded_at', models.DateTimeField(blank=True, null=True, verbose_name='responded at')),
                ('page_url', models.URLField(blank=True, help_text='URL where the contact form was submitted from', null=True, verbose_name='page URL')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('responded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contact_responses', to=settings.AUTH_USER_MODEL, verbose_name='responded by')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contact_messages', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'contact message',
                'verbose_name_plural': 'contact messages',
                'db_table': 'core_contactmessage',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MembershipPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='plan name')),
                ('slug', models.SlugField(max_length=100, unique=True, verbose_name='slug')),
                ('tier', models.CharField(choices=[('basic', 'Basic'), ('professional', 'Professional'), ('enterprise', 'Enterprise')], default='basic', max_length=20, verbose_name='tier')),
                ('description', models.TextField(verbose_name='description')),
                ('monthly_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)], verbose_name='monthly price')),
                ('annual_price', models.DecimalField(blank=True, decimal_places=2, help_text='Annual price (if different from monthly Ã— 12)', max_digits=10, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='annual price')),
                ('max_active_listings', models.PositiveIntegerField(default=1, help_text='0 for unlimited', verbose_name='max active listings')),
                ('max_featured_listings', models.PositiveIntegerField(default=0, verbose_name='featured listings per month')),
                ('max_images_per_listing', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(50)], verbose_name='images per listing')),
                ('has_priority_ranking', models.BooleanField(default=False, verbose_name='priority ranking')),
                ('has_advanced_analytics', models.BooleanField(default=False, verbose_name='advanced analytics')),
                ('has_dedicated_support', models.BooleanField(default=False, verbose_name='dedicated support')),
                ('can_use_virtual_tour', models.BooleanField(default=False, verbose_name='virtual tour')),
                ('can_use_video', models.BooleanField(default=False, verbose_name='property videos')),
                ('has_agency_profile', models.BooleanField(default=False, verbose_name='agency profile')),
                ('has_bulk_upload', models.BooleanField(default=False, verbose_name='bulk upload')),
                ('badge_text', models.CharField(blank=True, max_length=50, null=True, verbose_name='badge text')),
                ('badge_color', models.CharField(choices=[('primary', 'Primary'), ('success', 'Success'), ('warning', 'Warning'), ('danger', 'Danger'), ('info', 'Info'), ('dark', 'Dark')], default='primary', max_length=20, verbose_name='badge color')),
                ('display_order', models.PositiveIntegerField(default=0, verbose_name='display order')),
                ('is_popular', models.BooleanField(default=False, verbose_name='popular plan')),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
                ('is_featured', models.BooleanField(default=False, verbose_name='featured plan')),
                ('has_trial', models.BooleanField(default=False, verbose_name='free trial')),
                ('trial_days', models.PositiveIntegerField(default=0, verbose_name='trial days')),
                ('razorpay_plan_id', models.CharField(blank=True, help_text='Razorpay Plan ID for subscriptions', max_length=100, null=True, verbose_name='Razorpay plan ID')),
                ('razorpay_plan_id_monthly', models.CharField(blank=True, max_length=100, null=True, verbose_name='Monthly Razorpay plan ID')),
                ('razorpay_plan_id_annual', models.CharField(blank=True, max_length=100, null=True, verbose_name='Annual Razorpay plan ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('meta_title', models.CharField(blank=True, max_length=200, null=True, verbose_name='meta title')),
                ('meta_description', models.TextField(blank=True, null=True, verbose_name='meta description')),
            ],
            options={
                'verbose_name': 'membership plan',
                'verbose_name_plural': 'membership plans',
                'db_table': 'membership_plan',
                'ordering': ['display_order', 'monthly_price'],
                'indexes': [models.Index(fields=['slug'], name='membership__slug_f0948c_idx'), models.Index(fields=['tier'], name='membership__tier_0a823d_idx'), models.Index(fields=['is_active'], name='membership__is_acti_2470ae_idx'), models.Index(fields=['is_popular'], name='membership__is_popu_eea8ba_idx'), models.Index(fields=['monthly_price'], name='membership__monthly_8d076c_idx')],
            },
        ),
        migrations.CreateModel(
            name='NewsletterSubscription',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email', models.EmailField(max_length=254, unique=True, verbose_name='email')),
                ('name', models.CharField(blank=True, max_length=100, null=True, verbose_name='name')),
                ('receive_property_alerts', models.BooleanField(default=True, verbose_name='property alerts')),
                ('receive_newsletter', models.BooleanField(default=True, verbose_name='newsletter')),
                ('receive_promotions', models.BooleanField(default=False, verbose_name='promotions')),
                ('is_verified', models.BooleanField(default=False, verbose_name='verified')),
                ('verification_token', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
                ('subscribed_at', models.DateTimeField(auto_now_add=True)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'newsletter subscription',
                'verbose_name_plural': 'newsletter subscriptions',
                'db_table': 'core_newslettersubscription',
                'indexes': [models.Index(fields=['email'], name='core_newsle_email_144892_idx'), models.Index(fields=['is_active'], name='core_newsle_is_acti_09fb26_idx'), models.Index(fields=['subscribed_at'], name='core_newsle_subscri_ef0604_idx')],
            },
        ),
        migrations.CreateModel(
            name='Property',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(help_text='Clear and descriptive title for your property', max_length=255, verbose_name='property title')),
                ('slug', models.SlugField(help_text='Automatically generated from title', max_length=300, unique=True, verbose_name='slug')),
                ('ref_id', models.CharField(blank=True, help_text='Unique property reference number', max_length=50, null=True, unique=True, verbose_name='property reference ID')),
                ('description', models.TextField(help_text='Describe your property in detail (minimum 100 characters)', verbose_name='detailed description')),
                ('price', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0)], verbose_name='price')),
                ('price_negotiable', models.BooleanField(default=False, verbose_name='price negotiable')),
                ('security_deposit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='security deposit')),
                ('area', models.DecimalField(decimal_places=2, help_text='Area in square feet', max_digits=10, verbose_name='area')),
                ('area_unit', models.CharField(choices=[('sqft', 'Square Feet'), ('sqm', 'Square Meters'), ('acre', 'Acres'), ('hectare', 'Hectares')], default='sqft', max_length=20, verbose_name='area unit')),
                ('bedrooms', models.PositiveIntegerField(validators=[django.core.validators.MaxValueValidator(50)], verbose_name='bedrooms')),
                ('bathrooms', models.PositiveIntegerField(validators=[django.core.validators.MaxValueValidator(50)], verbose_name='bathrooms')),
                ('balconies', models.PositiveIntegerField(default=0, validators=[django.core.validators.MaxValueValidator(20)], verbose_name='balconies')),
                ('parking', models.PositiveIntegerField(default=0, validators=[django.core.validators.MaxValueValidator(20)], verbose_name='parking spaces')),
                ('status', models.CharField(choices=[('for_sale', 'For Sale'), ('for_rent', 'For Rent'), ('sold', 'Sold'), ('rented', 'Rented'), ('pending', 'Pending'), ('draft', 'Draft'), ('expired', 'Expired'), ('archived', 'Archived')], default='draft', max_length=20, verbose_name='property status')),
                ('furnishing', models.CharField(choices=[('furnished', 'Fully Furnished'), ('semi_furnished', 'Semi Furnished'), ('unfurnished', 'Unfurnished')], default='unfurnished', max_length=20, verbose_name='furnishing status')),
                ('condition', models.CharField(choices=[('new', 'New Construction'), ('excellent', 'Excellent'), ('good', 'Good'), ('needs_repair', 'Needs Repair'), ('renovated', 'Recently Renovated')], default='good', max_length=20, verbose_name='property condition')),
                ('year_built', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1800), django.core.validators.MaxValueValidator(2031)], verbose_name='year built')),
                ('address', models.TextField(help_text='Complete property address', verbose_name='full address')),
                ('city', models.CharField(db_index=True, max_length=100, verbose_name='city')),
                ('locality', models.CharField(help_text='Specific locality or neighborhood', max_length=100, verbose_name='locality/area')),
                ('landmark', models.CharField(blank=True, max_length=255, null=True, verbose_name='landmark')),
                ('pincode', models.CharField(db_index=True, max_length=10, verbose_name='pincode')),
                ('state', models.CharField(blank=True, default='', max_length=100, verbose_name='state')),
                ('country', models.CharField(default='India', max_length=100, verbose_name='country')),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, help_text='Latitude for map location', max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, help_text='Longitude for map location', max_digits=9, null=True)),
                ('listing_type', models.CharField(choices=[('owner', 'Owner'), ('agent', 'Agent'), ('builder', 'Builder')], default='owner', max_length=20, verbose_name='listed by')),
                ('contact_person', models.CharField(blank=True, max_length=100, null=True, verbose_name='contact person name')),
                ('contact_email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='contact email')),
                ('contact_phone', models.CharField(blank=True, max_length=17, null=True, verbose_name='contact phone')),
                ('is_featured', models.BooleanField(default=False, help_text='Show this property in featured listings', verbose_name='featured property')),
                ('is_premium', models.BooleanField(default=False, help_text='Premium listing with enhanced visibility', verbose_name='premium listing')),
                ('is_active', models.BooleanField(default=False, help_text='Show this property in search results', verbose_name='active')),
                ('is_verified', models.BooleanField(default=False, help_text='Property verified by admin team', verbose_name='verified property')),
                ('is_sold_rented', models.BooleanField(default=False, help_text='Mark if property is sold or rented', verbose_name='sold/rented')),
                ('virtual_tour', models.URLField(blank=True, help_text='Link to virtual tour (YouTube, Matterport, etc.)', null=True, verbose_name='virtual tour URL')),
                ('video_url', models.URLField(blank=True, help_text='Link to property video', null=True, verbose_name='property video URL')),
                ('floor_plan', models.ImageField(blank=True, null=True, upload_to='floor_plans/', verbose_name='floor plan')),
                ('brochure', models.FileField(blank=True, null=True, upload_to='brochures/', verbose_name='property brochure')),
                ('rera_registered', models.BooleanField(default=False, help_text='Is this property RERA registered?', verbose_name='RERA registered')),
                ('rera_number', models.CharField(blank=True, max_length=100, null=True, verbose_name='RERA registration number')),
                ('performance_score', models.DecimalField(decimal_places=2, default=0.0, help_text='Overall performance score (0-100)', max_digits=5, verbose_name='performance score')),
                ('click_through_rate', models.DecimalField(decimal_places=2, default=0.0, help_text='CTR in percentage', max_digits=5, verbose_name='click through rate')),
                ('meta_title', models.CharField(blank=True, max_length=200, null=True, verbose_name='meta title')),
                ('meta_description', models.TextField(blank=True, null=True, verbose_name='meta description')),
                ('view_count', models.PositiveIntegerField(default=0, verbose_name='view count')),
                ('inquiry_count', models.PositiveIntegerField(default=0, verbose_name='inquiry count')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('published_at', models.DateTimeField(blank=True, null=True, verbose_name='published at')),
                ('featured_until', models.DateTimeField(blank=True, help_text='Featured status expiry date', null=True)),
                ('expires_at', models.DateTimeField(blank=True, help_text='Listing expiry date', null=True, verbose_name='expires at')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='properties_created', to=settings.AUTH_USER_MODEL, verbose_name='created by')),
                ('last_modified_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='properties_modified', to=settings.AUTH_USER_MODEL, verbose_name='last modified by')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='properties', to=settings.AUTH_USER_MODEL, verbose_name='property owner')),
            ],
            options={
                'verbose_name': 'property',
                'verbose_name_plural': 'properties',
                'db_table': 'core_property',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DailyPropertyStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(db_index=True, verbose_name='date')),
                ('total_views', models.PositiveIntegerField(default=0, verbose_name='total views')),
                ('unique_visitors', models.PositiveIntegerField(default=0, verbose_name='unique visitors')),
                ('avg_duration', models.PositiveIntegerField(default=0, verbose_name='average duration')),
                ('total_inquiries', models.PositiveIntegerField(default=0, verbose_name='total inquiries')),
                ('phone_inquiries', models.PositiveIntegerField(default=0, verbose_name='phone inquiries')),
                ('whatsapp_inquiries', models.PositiveIntegerField(default=0, verbose_name='whatsapp inquiries')),
                ('email_inquiries', models.PositiveIntegerField(default=0, verbose_name='email inquiries')),
                ('contact_clicks', models.PositiveIntegerField(default=0, verbose_name='contact clicks')),
                ('whatsapp_clicks', models.PositiveIntegerField(default=0, verbose_name='whatsapp clicks')),
                ('call_clicks', models.PositiveIntegerField(default=0, verbose_name='call clicks')),
                ('desktop_views', models.PositiveIntegerField(default=0, verbose_name='desktop views')),
                ('mobile_views', models.PositiveIntegerField(default=0, verbose_name='mobile views')),
                ('tablet_views', models.PositiveIntegerField(default=0, verbose_name='tablet views')),
                ('direct_views', models.PositiveIntegerField(default=0, verbose_name='direct views')),
                ('organic_views', models.PositiveIntegerField(default=0, verbose_name='organic views')),
                ('social_views', models.PositiveIntegerField(default=0, verbose_name='social views')),
                ('referral_views', models.PositiveIntegerField(default=0, verbose_name='referral views')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('property', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='daily_stats', to='estate_app.property', verbose_name='property')),
            ],
            options={
                'verbose_name': 'daily property stats',
                'verbose_name_plural': 'daily property stats',
                'db_table': 'core_dailypropertystats',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='PropertyAmenity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.TextField(blank=True, null=True)),
                ('is_available', models.BooleanField(default=True)),
                ('distance', models.CharField(blank=True, help_text='Distance from property (e.g., 500m, 1km)', max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('amenity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='property_amenities', to='estate_app.amenity')),
                ('property', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='property_amenities', to='estate_app.property')),
            ],
            options={
                'verbose_name': 'property amenity',
                'verbose_name_plural': 'property amenities',
                'db_table': 'core_propertyamenity',
                'ordering': ['amenity__category', 'amenity__name'],
            },
        ),
        migrations.CreateModel(
            name='PropertyCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='category name')),
                ('slug', models.SlugField(help_text='URL-friendly version of the name', max_length=100, unique=True, verbose_name='slug')),
                ('property_type', models.CharField(choices=[('residential', 'Residential'), ('commercial', 'Commercial'), ('industrial', 'Industrial'), ('land', 'Land'), ('agricultural', 'Agricultural')], default='residential', max_length=20, verbose_name='property type')),
                ('icon', models.CharField(blank=True, help_text='Font Awesome icon class, e.g., fa-home', max_length=100, null=True, verbose_name='icon class')),
                ('description', models.TextField(blank=True, null=True, verbose_name='description')),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
                ('meta_title', models.CharField(blank=True, max_length=200, null=True, verbose_name='meta title')),
                ('meta_description', models.TextField(blank=True, null=True, verbose_name='meta description')),
                ('display_order', models.PositiveIntegerField(default=0, verbose_name='display order')),
            ],
            options={
                'verbose_name': 'property category',
                'verbose_name_plural': 'property categories',
                'db_table': 'core_propertycategory',
                'ordering': ['display_order', 'name'],
                'indexes': [models.Index(fields=['slug'], name='core_proper_slug_dca176_idx'), models.Index(fields=['property_type'], name='core_proper_propert_fbddb3_idx'), models.Index(fields=['is_active'], name='core_proper_is_acti_99410d_idx')],
            },
        ),
        migrations.AddField(
            model_name='property',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='properties', to='estate_app.propertycategory', verbose_name='property category'),
        ),
        migrations.CreateModel(
            name='PropertyFavorite',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('notes', models.TextField(blank=True, help_text='Private notes about this property', null=True, verbose_name='notes')),
                ('tags', models.CharField(blank=True, help_text='Comma-separated tags for organization', max_length=255, null=True, verbose_name='tags')),
                ('property', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='favorited_by', to='estate_app.property', verbose_name='property')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='favorites', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'property favorite',
                'verbose_name_plural': 'property favorites',
                'db_table': 'core_propertyfavorite',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PropertyImage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(help_text='Recommended size: 1200x800 pixels', upload_to=estate_app.models.property_image_path, verbose_name='property image')),
                ('thumbnail', models.ImageField(blank=True, editable=False, null=True, upload_to='thumbnails/', verbose_name='thumbnail')),
                ('caption', models.CharField(blank=True, max_length=255, null=True, verbose_name='image caption')),
                ('is_primary', models.BooleanField(default=False, help_text='Set as the main display image', verbose_name='primary image')),
                ('order', models.PositiveIntegerField(default=0, help_text='Order in which image appears (lower numbers first)', verbose_name='display order')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('property', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='images', to='estate_app.property', verbose_name='property')),
            ],
            options={
                'verbose_name': 'property image',
                'verbose_name_plural': 'property images',
                'db_table': 'core_propertyimage',
                'ordering': ['order', 'uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='PropertyInquiry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guest_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='name')),
                ('guest_email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='email')),
                ('phone', models.CharField(max_length=17, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '+999999999'. Up to 15 digits allowed.", regex='^\\+?1?\\d{9,15}$')], verbose_name='phone number')),
                ('message', models.TextField(help_text='Your questions or requirements', verbose_name='message')),
                ('inquiry_type', models.CharField(choices=[('general', 'General Inquiry'), ('viewing', 'Request Viewing'), ('price', 'Price Negotiation'), ('details', 'More Details'), ('other', 'Other')], default='general', max_length=20, verbose_name='inquiry type')),
                ('preferred_date', models.DateField(blank=True, null=True, verbose_name='preferred date')),
                ('preferred_time', models.TimeField(blank=True, null=True, verbose_name='preferred time')),
                ('status', models.CharField(choices=[('new', 'New'), ('read', 'Read'), ('contacted', 'Contacted'), ('scheduled', 'Viewing Scheduled'), ('negotiating', 'Negotiating'), ('converted', 'Converted to Deal'), ('closed', 'Closed'), ('spam', 'Spam')], default='new', max_length=20, verbose_name='status')),
                ('is_read', models.BooleanField(default=False, verbose_name='read')),
                ('is_archived', models.BooleanField(default=False, verbose_name='archived')),
                ('response', models.TextField(blank=True, null=True, verbose_name='response')),
                ('responded_at', models.DateTimeField(blank=True, null=True, verbose_name='responded at')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('property_link', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inquiries', to='estate_app.property', verbose_name='property')),
                ('responded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='responded_inquiries', to=settings.AUTH_USER_MODEL, verbose_name='responded by')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inquiries', to=settings.AUTH_USER_MODEL, verbose_name='inquirer')),
            ],
            options={
                'verbose_name': 'property inquiry',
                'verbose_name_plural': 'property inquiries',
                'db_table': 'core_propertyinquiry',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LeadInteraction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('interaction_type', models.CharField(choices=[('call', 'Phone Call'), ('whatsapp', 'WhatsApp Message'), ('email', 'Email'), ('sms', 'SMS'), ('visit', 'Site Visit'), ('meeting', 'Meeting'), ('note', 'Note')], max_length=20, verbose_name='interaction type')),
                ('subject', models.CharField(blank=True, max_length=255, null=True, verbose_name='subject')),
                ('message', models.TextField(blank=True, null=True, verbose_name='message')),
                ('duration', models.DurationField(blank=True, null=True, verbose_name='duration')),
                ('follow_up_date', models.DateTimeField(blank=True, null=True, verbose_name='follow up date')),
                ('follow_up_notes', models.TextField(blank=True, null=True, verbose_name='follow up notes')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, null=True, verbose_name='user agent')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lead_interactions', to=settings.AUTH_USER_MODEL, verbose_name='performed by')),
                ('lead', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='interactions', to='estate_app.propertyinquiry', verbose_name='lead')),
            ],
            options={
                'verbose_name': 'lead interaction',
                'verbose_name_plural': 'lead interactions',
                'db_table': 'core_leadinteraction',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PropertySubCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='estate_app.propertycategory')),
            ],
            options={
                'verbose_name': 'property subcategory',
                'verbose_name_plural': 'property subcategories',
                'db_table': 'core_propertysubcategory',
                'ordering': ['name'],
            },
        ),
        migrations.AddField(
            model_name='property',
            name='subcategory',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='properties', to='estate_app.propertysubcategory', verbose_name='property subcategory'),
        ),
        migrations.CreateModel(
            name='PropertyView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_key', models.CharField(blank=True, help_text='Anonymous user session key', max_length=100, null=True, verbose_name='session key')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, null=True, verbose_name='user agent')),
                ('referrer', models.URLField(blank=True, null=True, verbose_name='referrer')),
                ('device_type', models.CharField(blank=True, choices=[('desktop', 'Desktop'), ('tablet', 'Tablet'), ('mobile', 'Mobile'), ('bot', 'Bot/Crawler')], max_length=50, null=True, verbose_name='device type')),
                ('browser', models.CharField(blank=True, max_length=100, null=True, verbose_name='browser')),
                ('os', models.CharField(blank=True, max_length=100, null=True, verbose_name='operating system')),
                ('duration_seconds', models.PositiveIntegerField(default=0, help_text='Time spent on property page in seconds', verbose_name='view duration')),
                ('images_viewed', models.PositiveIntegerField(default=0, verbose_name='images viewed')),
                ('description_read', models.BooleanField(default=False, verbose_name='description read')),
                ('viewed_at', models.DateTimeField(auto_now_add=True)),
                ('property', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='views', to='estate_app.property', verbose_name='property')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='property_views', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'property view',
                'verbose_name_plural': 'property views',
                'db_table': 'core_propertyview',
                'ordering': ['-viewed_at'],
            },
        ),
        migrations.CreateModel(
            name='SavedSearch',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='Give a name to this search', max_length=100, verbose_name='search name')),
                ('city', models.CharField(blank=True, max_length=100, null=True)),
                ('locality', models.CharField(blank=True, max_length=100, null=True)),
                ('min_price', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('max_price', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('property_type', models.CharField(blank=True, max_length=50, null=True)),
                ('min_bedrooms', models.PositiveIntegerField(blank=True, null=True)),
                ('max_bedrooms', models.PositiveIntegerField(blank=True, null=True)),
                ('min_bathrooms', models.PositiveIntegerField(blank=True, null=True)),
                ('furnishing', models.CharField(blank=True, max_length=20, null=True)),
                ('frequency', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('instant', 'Instant')], default='daily', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('last_notified', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='saved_searches', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'saved search',
                'verbose_name_plural': 'saved searches',
                'db_table': 'core_savedsearch',
            },
        ),
        migrations.CreateModel(
            name='UserCredit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('featured_listing_credits', models.PositiveIntegerField(default=0)),
                ('bump_up_credits', models.PositiveIntegerField(default=0)),
                ('highlight_credits', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='credits', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'user_credit',
            },
        ),
        migrations.CreateModel(
            name='UserMembership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('duration', models.CharField(choices=[('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('semi_annual', 'Semi-Annual'), ('annual', 'Annual'), ('lifetime', 'Lifetime')], default='monthly', max_length=20, verbose_name='duration')),
                ('stripe_subscription_id', models.CharField(blank=True, max_length=255, null=True, verbose_name='Stripe subscription ID')),
                ('razorpay_subscription_id', models.CharField(blank=True, max_length=255, null=True, verbose_name='Razorpay subscription ID')),
                ('start_date', models.DateTimeField(default=django.utils.timezone.now, verbose_name='start date')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name='end date')),
                ('trial_end', models.DateTimeField(blank=True, null=True, verbose_name='trial end')),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
                ('is_trial', models.BooleanField(default=False, verbose_name='trial period')),
                ('auto_renew', models.BooleanField(default=True, verbose_name='auto renew')),
                ('listings_used', models.PositiveIntegerField(default=0, verbose_name='listings used')),
                ('featured_used_this_month', models.PositiveIntegerField(default=0, verbose_name='featured listings used this month')),
                ('last_payment_date', models.DateTimeField(blank=True, null=True, verbose_name='last payment date')),
                ('next_payment_date', models.DateTimeField(blank=True, null=True, verbose_name='next payment date')),
                ('amount_paid', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='total amount paid')),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name='cancelled at')),
                ('cancellation_reason', models.TextField(blank=True, null=True, verbose_name='cancellation reason')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('plan', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='user_memberships', to='estate_app.membershipplan', verbose_name='membership plan')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='membership', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'user membership',
                'verbose_name_plural': 'user memberships',
                'db_table': 'core_usermembership',
            },
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('avatar', models.ImageField(blank=True, help_text='Recommended size: 300x300 pixels', null=True, upload_to='avatars/', verbose_name='profile picture')),
                ('bio', models.TextField(blank=True, help_text='Tell us about yourself (max 1000 characters)', max_length=1000, verbose_name='biography')),
                ('agency_logo', models.ImageField(blank=True, null=True, upload_to='agency_logos/', verbose_name='agency logo')),
                ('license', models.CharField(blank=True, help_text='Your professional license number', max_length=100, null=True, verbose_name='real estate license')),
                ('whatsapp_number', models.CharField(blank=True, help_text='WhatsApp number for quick contact', max_length=17, null=True)),
                ('website', models.URLField(blank=True, help_text='Your professional website', null=True, verbose_name='website')),
                ('facebook', models.URLField(blank=True, null=True)),
                ('twitter', models.URLField(blank=True, null=True)),
                ('linkedin', models.URLField(blank=True, null=True)),
                ('instagram', models.URLField(blank=True, null=True)),
                ('address', models.TextField(blank=True, null=True, verbose_name='address')),
                ('city', models.CharField(blank=True, max_length=100, null=True, verbose_name='city')),
                ('state', models.CharField(blank=True, max_length=100, null=True, verbose_name='state')),
                ('country', models.CharField(blank=True, max_length=100, null=True, verbose_name='country')),
                ('pincode', models.CharField(blank=True, max_length=10, null=True, verbose_name='pincode')),
                ('experience_years', models.PositiveIntegerField(default=0, validators=[django.core.validators.MaxValueValidator(50)], verbose_name='years of experience')),
                ('specialization', models.CharField(blank=True, help_text='E.g., Residential, Commercial, Luxury Homes', max_length=255, null=True, verbose_name='specialization')),
                ('languages', models.CharField(blank=True, help_text='Comma-separated list of languages', max_length=255, null=True, verbose_name='languages spoken')),
                ('is_verified_agent', models.BooleanField(default=False, verbose_name='verified agent')),
                ('verification_documents', models.FileField(blank=True, help_text='Upload license/document for verification', null=True, upload_to='agent_docs/')),
                ('total_listings', models.PositiveIntegerField(default=0, verbose_name='total listings')),
                ('total_sales', models.PositiveIntegerField(default=0, verbose_name='total sales')),
                ('success_rate', models.DecimalField(decimal_places=2, default=0.0, help_text='Percentage of successful deals', max_digits=5, verbose_name='success rate')),
                ('avg_response_time', models.DurationField(blank=True, null=True, verbose_name='average response time')),
                ('total_clicks', models.PositiveIntegerField(default=0, verbose_name='total clicks')),
                ('total_calls', models.PositiveIntegerField(default=0, verbose_name='total calls')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'user profile',
                'verbose_name_plural': 'user profiles',
                'db_table': 'core_userprofile',
            },
        ),
        migrations.CreateModel(
            name='UserSubscription',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('active', 'Active'), ('past_due', 'Past Due'), ('canceled', 'Canceled'), ('expired', 'Expired'), ('pending', 'Pending'), ('trialing', 'Trialing')], default='pending', max_length=20, verbose_name='status')),
                ('duration', models.CharField(choices=[('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('semi_annual', 'Semi-Annual'), ('annual', 'Annual'), ('lifetime', 'Lifetime')], default='monthly', max_length=20, verbose_name='billing duration')),
                ('razorpay_subscription_id', models.CharField(blank=True, db_index=True, max_length=255, null=True, verbose_name='Razorpay subscription ID')),
                ('razorpay_customer_id', models.CharField(blank=True, db_index=True, max_length=255, null=True, verbose_name='Razorpay customer ID')),
                ('razorpay_plan_id', models.CharField(blank=True, max_length=100, null=True, verbose_name='Razorpay plan ID')),
                ('razorpay_payment_id', models.CharField(blank=True, max_length=255, null=True, verbose_name='Razorpay payment ID')),
                ('razorpay_signature', models.CharField(blank=True, max_length=500, null=True, verbose_name='Razorpay signature')),
                ('payment_method', models.CharField(choices=[('razorpay', 'Razorpay'), ('stripe', 'Stripe'), ('manual', 'Manual'), ('free', 'Free')], default='razorpay', max_length=20, verbose_name='payment method')),
                ('amount_paid', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='amount paid')),
                ('currency', models.CharField(default='INR', max_length=3, verbose_name='currency')),
                ('start_date', models.DateTimeField(default=django.utils.timezone.now, verbose_name='start date')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name='end date')),
                ('trial_start', models.DateTimeField(blank=True, null=True, verbose_name='trial start')),
                ('trial_end', models.DateTimeField(blank=True, null=True, verbose_name='trial end')),
                ('current_period_start', models.DateTimeField(blank=True, null=True, verbose_name='current period start')),
                ('current_period_end', models.DateTimeField(blank=True, null=True, verbose_name='current period end')),
                ('canceled_at', models.DateTimeField(blank=True, null=True, verbose_name='canceled at')),
                ('auto_renew', models.BooleanField(default=True, verbose_name='auto renew')),
                ('is_trial', models.BooleanField(default=False, verbose_name='trial period')),
                ('listings_used', models.PositiveIntegerField(default=0, verbose_name='listings used')),
                ('featured_used_this_month', models.PositiveIntegerField(default=0, verbose_name='featured listings used this month')),
                ('total_listings_created', models.PositiveIntegerField(default=0, verbose_name='total listings created')),
                ('last_payment_date', models.DateTimeField(blank=True, null=True, verbose_name='last payment date')),
                ('next_payment_date', models.DateTimeField(blank=True, null=True, verbose_name='next payment date')),
                ('payment_failed_count', models.PositiveIntegerField(default=0, verbose_name='payment failed count')),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='Additional subscription data', verbose_name='metadata')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('plan', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='user_subscriptions', to='estate_app.membershipplan', verbose_name='membership plan')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='subscription', to=settings.AUTH_USER_MODEL, verbose_name='user')),
            ],
            options={
                'verbose_name': 'user subscription',
                'verbose_name_plural': 'user subscriptions',
                'db_table': 'user_subscription',
            },
        ),
        migrations.CreateModel(
            name='SubscriptionFeatureUsage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('feature_type', models.CharField(choices=[('listing_created', 'Listing Created'), ('listing_featured', 'Listing Featured'), ('virtual_tour', 'Virtual Tour'), ('property_video', 'Property Video'), ('bulk_upload', 'Bulk Upload')], max_length=50)),
                ('usage_count', models.PositiveIntegerField(default=0)),
                ('limit', models.PositiveIntegerField(default=0)),
                ('period_start', models.DateTimeField()),
                ('period_end', models.DateTimeField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('subscription', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feature_usage', to='estate_app.usersubscription')),
            ],
            options={
                'db_table': 'subscription_feature_usage',
            },
        ),
        migrations.CreateModel(
            name='PaymentTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('razorpay_order_id', models.CharField(db_index=True, max_length=255, verbose_name='Razorpay order ID')),
                ('razorpay_payment_id', models.CharField(blank=True, db_index=True, max_length=255, null=True, verbose_name='Razorpay payment ID')),
                ('razorpay_signature', models.CharField(blank=True, max_length=500, null=True, verbose_name='Razorpay signature')),
                ('status', models.CharField(choices=[('created', 'Created'), ('authorized', 'Authorized'), ('captured', 'Captured'), ('refunded', 'Refunded'), ('failed', 'Failed'), ('pending', 'Pending')], default='created', max_length=20, verbose_name='status')),
                ('payment_method', models.CharField(blank=True, choices=[('card', 'Credit/Debit Card'), ('netbanking', 'Net Banking'), ('upi', 'UPI'), ('wallet', 'Wallet'), ('emi', 'EMI')], max_length=20, null=True, verbose_name='payment method')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='amount')),
                ('currency', models.CharField(default='INR', max_length=3, verbose_name='currency')),
                ('amount_refunded', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='amount refunded')),
                ('description', models.TextField(blank=True, null=True, verbose_name='description')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='metadata')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='error message')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True, verbose_name='paid at')),
                ('plan', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions', to='estate_app.membershipplan', verbose_name='membership plan')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payment_transactions', to=settings.AUTH_USER_MODEL, verbose_name='user')),
                ('subscription', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='estate_app.usersubscription', verbose_name='subscription')),
            ],
            options={
                'verbose_name': 'payment transaction',
                'verbose_name_plural': 'payment transactions',
                'db_table': 'payment_transaction',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='customuser',
            index=models.Index(fields=['email'], name='core_custom_email_a5d01e_idx'),
        ),
        migrations.AddIndex(
            model_name='customuser',
            index=models.Index(fields=['user_type'], name='core_custom_user_ty_4f24f0_idx'),
        ),
        migrations.AddIndex(
            model_name='customuser',
            index=models.Index(fields=['seller_type'], name='core_custom_seller__ecc28e_idx'),
        ),
        migrations.AddIndex(
            model_name='customuser',
            index=models.Index(fields=['is_verified'], name='core_custom_is_veri_52a4e1_idx'),
        ),
        migrations.AddIndex(
            model_name='customuser',
            index=models.Index(fields=['created_at'], name='core_custom_created_d6520b_idx'),
        ),
        migrations.AddIndex(
            model_name='contactmessage',
            index=models.Index(fields=['email'], name='core_contac_email_cfac76_idx'),
        ),
        migrations.AddIndex(
            model_name='contactmessage',
            index=models.Index(fields=['status'], name='core_contac_status_de41ec_idx'),
        ),
        migrations.AddIndex(
            model_name='contactmessage',
            index=models.Index(fields=['priority'], name='core_contac_priorit_5f9b6e_idx'),
        ),
        migrations.AddIndex(
            model_name='contactmessage',
            index=models.Index(fields=['is_resolved'], name='core_contac_is_reso_0d27f3_idx'),
        ),
        migrations.AddIndex(
            model_name='contactmessage',
            index=models.Index(fields=['created_at'], name='core_contac_created_63cb1b_idx'),
        ),
        migrations.AddIndex(
            model_name='dailypropertystats',
            index=models.Index(fields=['property', 'date'], name='core_dailyp_propert_7e14db_idx'),
        ),
        migrations.AddIndex(
            model_name='dailypropertystats',
            index=models.Index(fields=['date'], name='core_dailyp_date_0fc31d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='dailypropertystats',
            unique_together={('property', 'date')},
        ),
        migrations.AlterUniqueTogether(
            name='propertyamenity',
            unique_together={('property', 'amenity')},
        ),
        migrations.AddIndex(
            model_name='propertyfavorite',
            index=models.Index(fields=['user', 'property'], name='core_proper_user_id_966def_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyfavorite',
            index=models.Index(fields=['created_at'], name='core_proper_created_a9a55c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='propertyfavorite',
            unique_together={('user', 'property')},
        ),
        migrations.AddIndex(
            model_name='propertyimage',
            index=models.Index(fields=['property', 'is_primary'], name='core_proper_propert_ef7ca8_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyimage',
            index=models.Index(fields=['property', 'order'], name='core_proper_propert_79dbbf_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='propertyimage',
            unique_together={('property', 'order')},
        ),
        migrations.AddIndex(
            model_name='propertyinquiry',
            index=models.Index(fields=['property_link', 'status'], name='core_proper_propert_848c94_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyinquiry',
            index=models.Index(fields=['user'], name='core_proper_user_id_0a8a70_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyinquiry',
            index=models.Index(fields=['is_read'], name='core_proper_is_read_816c91_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyinquiry',
            index=models.Index(fields=['status'], name='core_proper_status_695756_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyinquiry',
            index=models.Index(fields=['created_at'], name='core_proper_created_832e18_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['slug'], name='core_proper_slug_b23ff2_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['city', 'locality'], name='core_proper_city_984059_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['price'], name='core_proper_price_652b7d_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['bedrooms'], name='core_proper_bedroom_cf366a_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['area'], name='core_proper_area_cb66d2_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['is_featured'], name='core_proper_is_feat_09dca4_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['is_active'], name='core_proper_is_acti_87ea35_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['is_verified'], name='core_proper_is_veri_ade3f1_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['status'], name='core_proper_status_95c99c_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['created_at'], name='core_proper_created_a942a9_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['owner', 'is_active'], name='core_proper_owner_i_a5a8dd_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['latitude', 'longitude'], name='core_proper_latitud_67d4ff_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['expires_at'], name='core_proper_expires_0e6286_idx'),
        ),
        migrations.AddIndex(
            model_name='property',
            index=models.Index(fields=['performance_score'], name='core_proper_perform_8e6a29_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyview',
            index=models.Index(fields=['property', 'viewed_at'], name='core_proper_propert_6685d0_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyview',
            index=models.Index(fields=['user', 'viewed_at'], name='core_proper_user_id_3fe872_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyview',
            index=models.Index(fields=['ip_address', 'viewed_at'], name='core_proper_ip_addr_cedcdd_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyview',
            index=models.Index(fields=['viewed_at'], name='core_proper_viewed__1105a6_idx'),
        ),
        migrations.AddIndex(
            model_name='propertyview',
            index=models.Index(fields=['device_type'], name='core_proper_device__2cc5e8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='savedsearch',
            unique_together={('user', 'name')},
        ),
        migrations.AddIndex(
            model_name='usermembership',
            index=models.Index(fields=['user', 'is_active'], name='core_userme_user_id_e1d1da_idx'),
        ),
        migrations.AddIndex(
            model_name='usermembership',
            index=models.Index(fields=['plan'], name='core_userme_plan_id_aad637_idx'),
        ),
        migrations.AddIndex(
            model_name='usermembership',
            index=models.Index(fields=['start_date'], name='core_userme_start_d_aa7ebe_idx'),
        ),
        migrations.AddIndex(
            model_name='usermembership',
            index=models.Index(fields=['end_date'], name='core_userme_end_dat_bcd9ef_idx'),
        ),
        migrations.AddIndex(
            model_name='usermembership',
            index=models.Index(fields=['is_active'], name='core_userme_is_acti_91931b_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['user'], name='core_userpr_user_id_830b32_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['is_verified_agent'], name='core_userpr_is_veri_d6191b_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['city', 'state'], name='core_userpr_city_f5c2d8_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['user', 'status'], name='user_subscr_user_id_76d59b_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['razorpay_subscription_id'], name='user_subscr_razorpa_70f984_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['status', 'end_date'], name='user_subscr_status_d760dc_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['start_date'], name='user_subscr_start_d_cec781_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['end_date'], name='user_subscr_end_dat_f47d0a_idx'),
        ),
        migrations.AddIndex(
            model_name='usersubscription',
            index=models.Index(fields=['created_at'], name='user_subscr_created_cbf219_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='subscriptionfeatureusage',
            unique_together={('subscription', 'feature_type', 'period_start')},
        ),
        migrations.AddIndex(
            model_name='paymenttransaction',
            index=models.Index(fields=['razorpay_order_id'], name='payment_tra_razorpa_2a9de4_idx'),
        ),
        migrations.AddIndex(
            model_name='paymenttransaction',
            index=models.Index(fields=['razorpay_payment_id'], name='payment_tra_razorpa_439971_idx'),
        ),
        migrations.AddIndex(
            model_name='paymenttransaction',
            index=models.Index(fields=['user', 'status'], name='payment_tra_user_id_33fe33_idx'),
        ),
        migrations.AddIndex(
            model_name='paymenttransaction',
            index=models.Index(fields=['status', 'created_at'], name='payment_tra_status_deda57_idx'),
        ),
        migrations.AddIndex(
            model_name='paymenttransaction',
            index=models.Index(fields=['created_at'], name='payment_tra_created_0d0f1d_idx'),
        ),
    ]
